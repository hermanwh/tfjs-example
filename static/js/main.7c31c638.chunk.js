(this["webpackJsonptfjs-example"]=this["webpackJsonptfjs-example"]||[]).push([[0],{361:function(e,t,a){},363:function(e,t,a){},372:function(e,t){},373:function(e,t){},381:function(e,t){},384:function(e,t){},385:function(e,t){},461:function(e,t,a){"use strict";a.r(t);var n=a(29),s=a(21),r=a.n(s),i=a(163),c=a.n(i),o=(a(361),a(2)),l=a.n(o),u=a(14),d=a(15),h=a(7),b=(a(363),a(320)),j=a.n(b),p=a(263),m=a(18),f=a(495);function O(e,t,a,n){var s=[],r=Object(m.a)({},e,{name:e,type:t});s.sensors=null!==a?Object(p.a)(Object(p.a)({},a.sensors),r):[],s.input=[],s.output=[],s.internal=[],Object.keys(s.sensors).forEach((function(e){return s[s.sensors[e].type].push(s.sensors[e].name)})),n(s)}var x=function(e){var t=Object(s.useState)(!1),a=Object(h.a)(t,2),r=a[0],i=a[1],c=Object(s.useState)(!1),o=Object(h.a)(c,2),l=o[0],u=o[1],d=Object(s.useState)(!1),b=Object(h.a)(d,2),j=b[0],p=b[1],m=function(t){switch(t){case 0:i(!0),u(!1),p(!1),e.func(e.sensor,"input",e.sensorConfig,e.setFunc);break;case 1:u(!0),i(!1),p(!1),e.func(e.sensor,"output",e.sensorConfig,e.setFunc);break;case 2:p(!0),u(!1),i(!1),e.func(e.sensor,"internal",e.sensorConfig,e.setFunc)}};return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:Object(n.jsx)("p",{children:e.sensor})}),Object(n.jsx)("td",{children:Object(n.jsx)(f.a,{color:"default",onClick:function(){return m(0)},checked:r})}),Object(n.jsx)("td",{children:Object(n.jsx)(f.a,{color:"default",onClick:function(){return m(1)},checked:l})}),Object(n.jsx)("td",{children:Object(n.jsx)(f.a,{color:"default",onClick:function(){return m(2)},checked:j})})]})},g=a(71),w=a(344),v=a(137);function k(e,t){t=t.map((function(e){return Number(e)})),e=e.map((function(e){return Number(e)}));for(var a=0,n=0,s=0,r=0;r<t.length;r++)a+=t[r];a/=t.length;for(var i=0;i<t.length;i++)n+=Math.pow(t[i]-a,2),s+=Math.pow(e[i]-t[i],2);return{meanValue:a,SStot:n,SSres:s,rSquared:1-s/n}}function y(e,t,a,n){var s={};return s.trainFeatures=g.tensor2d(e),s.trainTargets=g.tensor2d(a),s.testFeatures=g.tensor2d(t),s.testTargets=g.tensor2d(n),s}function _(e,t,a){var n=function(e){var t=[],a=e[0];return e.slice(1,-1).forEach((function(e,n){var s={};a.forEach((function(t,a){return s[t]=e[a]})),t.push(s)})),t}(e),s=function(e,t){var a=t.input,n=e.map((function(e){return[Number(e[t.output[0]])]})),s=[];return e.forEach((function(e){var t=[];a.forEach((function(a){t.push(Number(e[a]))})),s.push(t)})),[s,n]}(n=function(e){return Object(v.shuffle)(e)}(n=function(e){return e.filter((function(e){return!Object.values(e).some((function(e){return""===e||null==e}))}))}(n)),t),r=Object(h.a)(s,2);return function(e,t,a){var n=e.length,s=n-Math.round(n*a);return[e.slice(0,s-1),e.slice(s-1),t.slice(0,s-1),t.slice(s-1)]}(r[0],r[1],a.test_train_split)}function S(e,t,a,n,s){var r=g.sequential();return r.add(g.layers.dense({kernelRegularizer:g.regularizers.L1L2,units:e[0],activation:n,inputShape:[t]})),e.slice(1).forEach((function(e){r.add(g.layers.dense({kernelRegularizer:g.regularizers.L1L2,units:e,activation:n,inputShape:[e]}))})),r.add(g.layers.dense({units:a,activation:s})),r}var N={batchSize:1024,test_train_split:.2,validation_split:.2,learningRate:.01,epochs:10,optimizer:g.train.adam(.01),loss:"meanAbsoluteError",min_R2_score:.5,max_iterations:4};var F=function(){var e=Object(s.useState)(1),t=Object(h.a)(e,2),a=t[0],r=t[1],i=Object(s.useState)(null),c=Object(h.a)(i,2),o=c[0],b=c[1],p=Object(s.useState)(null),m=Object(h.a)(p,2),f=m[0],g=m[1],v=Object(s.useState)(!1),F=Object(h.a)(v,2),C=(F[0],F[1]),T=Object(s.useState)(null),z=Object(h.a)(T,2),E=z[0],I=z[1],R=Object(s.useState)(-1e3),q=Object(h.a)(R,2),G=q[0],L=q[1],A=Object(s.useState)(!1),D=Object(h.a)(A,2),B=D[0],M=D[1],U=Object(s.useState)(!1),H=Object(h.a)(U,2),J=(H[0],H[1]),P=Object(s.useState)([]),V=Object(h.a)(P,2),Y=V[0],K=V[1],Q=Object(s.useState)(null),W=Object(h.a)(Q,2),X=(W[0],W[1]),Z=Object(s.useState)(N.epochs),$=Object(h.a)(Z,2),ee=$[0],te=$[1],ae=Object(s.useState)(N.batchSize),ne=Object(h.a)(ae,2),se=ne[0],re=ne[1];function ie(e,t,a,n){return ce.apply(this,arguments)}function ce(){return(ce=Object(d.a)(l.a.mark((function e(t,a,n,s){var r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J(!0),r=y(t,a,n,s),e.next=4,oe(r.trainFeatures,r.trainTargets);case 4:i=e.sent,X(i),L(k(i.predict(r.testFeatures).arraySync(),s).rSquared),M(!0),J(!1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e,t){return le.apply(this,arguments)}function le(){return(le=Object(d.a)(l.a.mark((function e(t,a){var n,s,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=S([128,128],t.shape[1],a.shape[1],"relu","linear")).summary(),n.compile({optimizer:N.optimizer,loss:N.loss}),N.batchSize>t.shape[0]&&(re(32),te(30)),s=document.getElementById("lossCanvas"),r=w.show.fitCallbacks(s,["loss","val_loss"],{callbacks:["onEpochEnd","onBatchEnd"]}),e.next=8,n.fit(t,a,{batchSize:N.batchSize>t.shape[0]?32:N.batchSize,epochs:N.batchSize>t.shape[0]?30:N.epochs,validationSplit:N.validation_split,callbacks:r});case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(){return(ue=Object(d.a)(l.a.mark((function e(){var t,a,n,s,i,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r(3),t=_(o,E,N),a=Object(h.a)(t,4),n=a[0],s=a[1],i=a[2],c=a[3],K([n,s,i,c]),ie(n,s,i,c);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)("div",{className:"step",children:Object(n.jsxs)("p",{className:"midtext",children:["This small web application shows an entry-level example of machine learning performed directly in the browser using"," ",Object(n.jsx)("a",{href:"https://www.tensorflow.org/js",target:"_blank",children:"TensorFlowJS"})," ","and"," ",Object(n.jsx)("a",{href:"https://reactjs.org/",target:"_blank",children:"React"}),". A dataset in"," ",Object(n.jsx)("a",{href:"https://en.wikipedia.org/wiki/Comma-separated_values",target:"_blank",children:".csv format"})," ","is parsed to a matrix of strings and converted to"," ",Object(n.jsx)("a",{href:"https://www.tensorflow.org/guide/tensor",target:"_blank",children:"tensors"}),". Input and output"," ",Object(n.jsx)("a",{href:"https://en.wikipedia.org/wiki/Feature_(machine_learning)",target:"_blank",children:"features"})," ","may be adjusted by the user. A"," ",Object(n.jsx)("a",{href:"https://en.wikipedia.org/wiki/Artificial_neural_network",target:"_blank",children:"neural network"})," ","model with sensible default"," ",Object(n.jsx)("a",{href:"https://en.wikipedia.org/wiki/Hyperparameter_(machine_learning)",target:"_blank",children:"hyperparameters"})," ","and structure is trained.",Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),"For testing, I prepared the following datasets which you are advised to use:",Object(n.jsx)("br",{}),Object(n.jsx)("a",{href:"https://github.com/hermanwh/tfjs-example/blob/main/iris_flower_dataset_extended.csv",target:"_blank",children:"Iris flower dataset"})," ","(direct download link:"," ",Object(n.jsx)("a",{href:"https://minhaskamal.github.io/DownGit/#/home?url=https://github.com/hermanwh/tfjs-example/blob/main/iris_flower_dataset_extended.csv",target:"_blank",children:"link1"}),")",Object(n.jsx)("br",{}),Object(n.jsx)("a",{href:"https://github.com/hermanwh/tfjs-example/blob/main/mechanical_component_dataset.csv",target:"_blank",children:"hydraulic jack system"})," ","(direct downloiad link:"," ",Object(n.jsx)("a",{href:"https://minhaskamal.github.io/DownGit/#/home?url=https://github.com/hermanwh/tfjs-example/blob/main/mechanical_component_dataset.csv",target:"_blank",children:"link2"}),").",Object(n.jsx)("br",{}),"Download links from GitHub are created using"," ",Object(n.jsx)("a",{href:"https://minhaskamal.github.io/DownGit",target:"_blank",children:"https://minhaskamal.github.io/DownGit"}),".",Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),"For implementation details, visit"," ",Object(n.jsx)("a",{href:"https://github.com/hermanwh/tfjs-example",target:"_blank",children:"the GitHub repository"})]})}),Object(n.jsxs)("div",{className:"step",children:[a>1?Object(n.jsx)("p",{className:"green",children:"1. Upload dataset in .csv format \xa0 \u2714"}):Object(n.jsx)("p",{children:"1. Upload dataset in .csv format"}),Object(n.jsx)("p",{className:"smalltext",children:"The first row of the file should contain the column headers. The following rows should contain data values."}),Object(n.jsx)(j.a,{cssClass:"react-csv-input",onFileLoaded:function(e){C(!0),b(e),g(e[0]),r(2)}})]}),a>1&&Object(n.jsxs)("div",{className:"step",children:[a>2?Object(n.jsx)("p",{className:"green",children:"2. Choose input and output features \xa0 \u2714"}):Object(n.jsx)("p",{children:"2. Choose input and output features"}),Object(n.jsx)("p",{className:"smalltext",children:"Any number of input features can be used to predict any number of output features. Irrelevant dataset columns, e.g. time or index columns, may be excluded. Features with no selected value are ignored."}),null!=f&&Object(n.jsx)("div",{children:Object(n.jsx)("table",{children:Object(n.jsxs)("tbody",{children:[Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{className:"TableField",children:"Feature name"}),Object(n.jsx)("th",{className:"TableField",children:"Input"}),Object(n.jsx)("th",{className:"TableField",children:"Output"}),Object(n.jsx)("th",{className:"TableField",children:"Exclude"})]}),f&&f.map((function(e){return Object(n.jsx)(x,{sensor:e,func:O,sensorConfig:E,setFunc:I},e)}))]})})})]}),a>1&&Object(n.jsxs)("div",{className:"step",children:[B?Object(n.jsx)("p",{className:"green",children:"3. Train your neural network model \xa0 \u2714"}):Object(n.jsx)("p",{children:"3. Train your neural network model"}),Object(n.jsx)("button",{className:"react-csv-input",onClick:function(){return ue.apply(this,arguments)},children:"Init model training"})]}),Object(n.jsxs)("div",{className:"step",style:{paddingTop:"0px"},children:[Object(n.jsxs)("div",{children:[a>2&&Object(n.jsxs)("p",{className:"smalltext",children:["The model is being trained for ",ee," epochs in batches of"," ",se,". Epochs are the number of loops over the entirely training data. Batch size is the number of dataset rows used to calculate the stochastic gradient and perform weight updates. The figures below are updated when a batch or epoch is finished, respectively."]}),Object(n.jsx)("div",{className:"canvases",id:"lossCanvas"})]}),B&&Object(n.jsxs)("div",{children:[Object(n.jsxs)("p",{children:["R-squared score: ",G.toFixed(5)]}),Object(n.jsxs)("p",{className:"smalltext",children:["The"," ",Object(n.jsx)("a",{href:"https://en.wikipedia.org/wiki/Coefficient_of_determination",children:"R-squared metric"})," ","is a measure of how well observed outcomes are replicated by the model. 1.0 means perfect replication, while anything above 0.0 indicates the model performed better than a mean predictor."]}),Object(n.jsx)("button",{className:"buttonStyle",onClick:function(){return ie.apply(void 0,Object(u.a)(Y))},children:"Retrain model"}),Object(n.jsxs)("div",{className:"step",children:[Object(n.jsx)("p",{children:"So what now?"}),Object(n.jsxs)("p",{className:"smalltext",children:["Good question! Usually, the trained model would be evaluated based on some metrics (R-squared is one such metric), and perhaps even using empirical analysis and expert knowledge. If deemed suitable, the model may be used to make predictions on new, future data samples. The difference between measured and predicted value can be used to derive fault models, e.g. indicating component health in a mechanical or industrial system. Using machine learning models in practice is a large and active area of research. You can read about an attempt at using neural network models for condition monitoring for the oil and gas industry in"," ",Object(n.jsx)("a",{href:"https://github.com/hermanwh/master-thesis",target:"_black",children:"my master thesis"}),"."]})]})]})]})]})},C=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,496)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),n(e),s(e),r(e),i(e)}))};c.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(F,{})}),document.getElementById("root")),C()}},[[461,1,2]]]);
//# sourceMappingURL=main.7c31c638.chunk.js.map